<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/base}">
<head>
    <title>ëŒ€ì‹œë³´ë“œ</title>

    <th:block layout:fragment="head_extra">
        <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
        <style>
            /* 1. ê¸°ë³¸ ë ˆì´ì•„ì›ƒ ì¬ì •ì˜ (í•„ìš”í•œ ê²½ìš°) */
            /* bodyì™€ HTMLì— ë†’ì´ë¥¼ 100% ì„¤ì •í•˜ì—¬ ë·°í¬íŠ¸ ê¸°ì¤€ìœ¼ë¡œ ë†’ì´ë¥¼ ì¡ì„ ìˆ˜ ìˆê²Œ í•©ë‹ˆë‹¤. */
            html, body {
                height: 100%;
                margin: 0;
            }
            /* ë§Œì•½ base í…œí”Œë¦¿ì˜ content ì„¹ì…˜ì´ main íƒœê·¸ë¼ë©´, ê·¸ íƒœê·¸ì—ë„ ë†’ì´ê°€ ì ìš©ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. */
            /* section[layout\:fragment="content"] {
                height: 100%;
                display: flex;
                flex-direction: column;
            } */


            /* 2. ëŒ€ì‹œë³´ë“œ ì „ì²´ ì»¨í…Œì´ë„ˆ ì„¤ì • */
            .dashboard-container {
                /* â— ì¤‘ìš”: ë·°í¬íŠ¸ ë†’ì´ì—ì„œ í—¤ë”/ë„¤ë¹„ê²Œì´ì…˜ ë“± ìƒë‹¨ ê³ ì • ì˜ì—­ì˜ ë†’ì´(ì˜ˆ: 80px)ë¥¼ ëº€ ë§Œí¼ ë†’ì´ë¥¼ í™•ë³´ */
                height: calc(100vh - 120px); /* ë·°í¬íŠ¸ ì „ì²´ ë†’ì´ì—ì„œ ìƒë‹¨ ë©”ë‰´ë°” ë“±ì„ ê³ ë ¤í•´ 120px ì œì™¸ */
                padding: 20px;
                display: flex;
                flex-direction: column;
                gap: 20px;
                overflow: hidden; /* ì»¨í…Œì´ë„ˆ ë‚´ì—ì„œ ìŠ¤í¬ë¡¤ì´ ë°œìƒí•˜ì§€ ì•Šë„ë¡ ì„¤ì • */
            }

            /* 3. ìƒë‹¨ í†µê³„ íƒ€ì¼ ê·¸ë£¹ */
            .stats-group {
                display: grid;
                grid-template-columns: repeat(3, 1fr);
                gap: 20px;
                flex-shrink: 0; /* ë†’ì´ê°€ ì¤„ì–´ë“¤ ë•Œ ì´ ì˜ì—­ì€ ì¶•ì†Œë˜ì§€ ì•Šë„ë¡ ê³ ì • */
            }

            /* í†µê³„ íƒ€ì¼ ìŠ¤íƒ€ì¼ (ì´ì „ê³¼ ë™ì¼) */
            .stat-card {
                background-color: #f7f7f7;
                padding: 15px 20px;
                border-radius: 4px;
                border: 1px solid #ddd;
                /* ë†’ì´ ê³ ì • (ì‘ì€ íƒ€ì¼ì´ë¯€ë¡œ) */
                height: 90px;
            }
            .stat-label { font-size: 0.9em; color: #666; display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px; }
            .stat-value { font-size: 2em; font-weight: bold; color: #333; }
            .stat-icon { font-size: 24px; }


            /* 4. í•˜ë‹¨ ëª¨ë“ˆ ê·¸ë£¹ (2x2 Layout) */
            .modules-group {
                /* â— ì¤‘ìš”: ë‚¨ì€ ìˆ˜ì§ ê³µê°„ì„ ëª¨ë‘ ì°¨ì§€í•˜ë„ë¡ ì„¤ì • */
                flex-grow: 1;
                
                display: grid;
                grid-template-columns: 1fr 1fr;
                /* â— ì¤‘ìš”: ë‚¨ì€ ê³µê°„ì„ ë‘ í–‰ì´ ê· ë“±í•˜ê²Œ ë‚˜ëˆ„ì–´ ì°¨ì§€ */
                grid-template-rows: 1fr 1fr; 
                gap: 20px;
                overflow: hidden; /* ì°¨íŠ¸ ì˜ì—­ ë‚´ ìŠ¤í¬ë¡¤ ë°©ì§€ */
            }

            .module-card {
                background-color: #ffffff;
                padding: 10px;
                border-radius: 4px;
                border: 1px solid #ddd;

                display: flex;
                flex-direction: column;
                overflow: hidden;
            }

            .module-title {
                font-size: 1.1em;
                font-weight: bold;
                margin-bottom: 10px;
                padding: 5px;
                color: #333;
                background-color: #f0f0f0;
                flex-shrink: 0; /* ì œëª©ì€ ë†’ì´ê°€ ì¤„ì–´ë“¤ì§€ ì•Šë„ë¡ ê³ ì • */
            }

            /* Chart.js ìº”ë²„ìŠ¤ ìŠ¤íƒ€ì¼ */
            canvas {
                /* â— ì¤‘ìš”: ë¶€ëª¨ ì¹´ë“œì˜ ë‚¨ì€ ê³µê°„ì„ ëª¨ë‘ ì°¨ì§€ */
                flex-grow: 1; 
                width: 100% !important;
                height: 100% !important;
                max-height: 100%;
            }
        </style>
    </th:block>
</head>
<body>
    <section layout:fragment="content">
        
        <div class="dashboard-container">
            
            <div class="stats-group">
                
                <div class="stat-card">
                    <div class="stat-label"><span>ê·¼ë¬´ ì¤‘ ì¸ì›</span><span class="stat-icon">ğŸ‘¥</span>
                    <div class="stat-value">10ëª…</div></div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-label"><span>ì´ë²ˆ ë‚  ë§¤ì¶œ</span><span class="stat-icon">ğŸ“ˆ</span>
                    <div class="stat-value">â‚© 0</div></div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-label"><span>ì¬ê³  í˜„í™©</span><span class="stat-icon">ğŸ›ï¸</span>
                    <div class="stat-value">0ê°œ</div></div>
                </div>
                
            </div> 
            
            <div class="modules-group">
                
                <div class="module-card">
                    <div class="module-title">ì˜ì—… ëª¨ë“ˆ</div>
                    <canvas id="salesChart"></canvas>
                </div>
                
                <div class="module-card">
                    <div class="module-title">ì¬ê³  ëª¨ë“ˆ</div>
                    <canvas id="inventoryChart"></canvas>
                </div>
                
                <div class="module-card">
                    <div class="module-title">ì¸ì‚¬ ëª¨ë“ˆ</div>
                    <canvas id="hrChart"></canvas>
                </div>
                
                <div class="module-card">
                    <div class="module-title">íšŒê³„ ëª¨ë“ˆ</div>
                    <canvas id="accountingChart"></canvas>
                </div>

            </div>
        
        </div>

        
        <script th:inline="javascript">
            // Chart.jsë¡œ ì°¨íŠ¸ë¥¼ ê·¸ë¦¬ëŠ” í•¨ìˆ˜
            function createChart(canvasId, type, data) {
                const ctx = document.getElementById(canvasId);
                if (!ctx) return;
                
                new Chart(ctx.getContext('2d'), {
                    type: type,
                    data: data,
                    options: { 
                        responsive: true, 
                        maintainAspectRatio: false, // ìº”ë²„ìŠ¤ í¬ê¸°ë¥¼ ë¶€ëª¨ ì»¨í…Œì´ë„ˆì— ë§ì¶¤
                        plugins: { legend: { display: false } }, 
                        scales: {
                            y: { ticks: { font: { size: 10 } } },
                            x: { ticks: { font: { size: 10 } } }
                        }
                    }
                });
            }
            
            // ë°ì´í„° ì •ì˜ (ì´ì „ê³¼ ë™ì¼)
            const salesData = { labels: ['1Q', '2Q', '3Q', '4Q'], datasets: [{ label: 'ë¶„ê¸° ë§¤ì¶œ', data: [12, 19, 3, 5], backgroundColor: 'rgba(75, 192, 192, 0.8)', borderWidth: 1 }] };
            const inventoryData = { labels: ['A ìƒí’ˆ', 'B ìƒí’ˆ', 'C ìƒí’ˆ'], datasets: [{ data: [300, 50, 100], backgroundColor: ['#FF6384', '#36A2EB', '#FFCE56'] }] };
            const hrData = { labels: ['ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ'], datasets: [{ label: 'íœ´ê°€ ì‚¬ìš©ë¥ ', data: [1, 3, 2, 4, 1], fill: false, borderColor: 'rgb(255, 99, 132)', tension: 0.1 }] };
            const accountingData = { labels: ['ê¸‰ì—¬', 'ìš´ì˜ë¹„', 'ë§ˆì¼€íŒ…ë¹„'], datasets: [{ data: [50, 25, 25], backgroundColor: ['#4BC0C0', '#9966FF', '#FF9F40'] }] };
            
            // ì°¨íŠ¸ ìƒì„±
            createChart('salesChart', 'bar', salesData);
            createChart('inventoryChart', 'doughnut', inventoryData);
            createChart('hrChart', 'line', hrData);
            createChart('accountingChart', 'pie', accountingData);
            
        </script>
        
    </section>
</body>
</html>