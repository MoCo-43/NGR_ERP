<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- 인터페이스 FQN과 100% 일치 -->
<mapper namespace="com.yedam.erp.mapper.account.accountMapper">
	<select id="selectAll" resultType="accountVO">
		SELECT acct_code,
		acct_name,
		std_acct_name,
		category,
		use_yn,
		acct_kwan,
		acct_hang,
		acct_mok
		FROM ACCOUNT
		WHERE COMPANY_CODE = #{companyCode}
	</select>

	<update id="updateYN">
		UPDATE account
		SET use_yn =
		CASE use_yn
		WHEN 'Y' THEN 'N'
		ELSE 'Y'
		END
		WHERE acct_code = #{acctCode}
		AND COMPANY_CODE = #{companyCode}

	</update>

	<!-- 엑셀 파일 인서트 -->
	<insert id="bulkInsert" parameterType="java.util.List">
		INSERT ALL
		<foreach collection="list" item="item">
			INTO account (acct_code, acct_name, std_acct_name, category, use_yn, company_code)
			VALUES (#{item.acctCode}, #{item.acctName}, #{item.stdAcctName},
			#{item.category}, #{item.useYn},#{item.compnacyCode})
		</foreach>
		SELECT 1 FROM dual
	</insert>

	<!-- 매입 매출 전표 헤더 -->
	<select id="selectInvoice" resultType="invoiceVO">
	SELECT INVOICE_CODE, INVOICE_NO, TYPE, INVOICE_DATE,
		    ORDER_CODE, DEPT_CODE, CUS_CODE, BIZ_NO, CUS_NAME, VAT_TYPE,
		    DUE_DATE, SUBTOTAL_AMT, VAT_AMT, TOTAL_AMT,
		    PAY_METHOD, MEMO, AR_AP_ACCT, CASH_ACCOUNT,
		    STATUS, CREATED_AT, UPDATED_AT,POSTED_FLAG
    FROM INVOICE_HEADER
    WHERE COMPANY_CODE = #{companyCode}
	</select>


	
</mapper>
